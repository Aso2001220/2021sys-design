@startuml

opt 未登録
ユーザー -> サンプルサイト : ユーザー登録<br>
サンプルサイト -> DBサーバー : ユーザー登録<br>
DBサーバー -> DBサーバー : 登録処理<br>
DBサーバー -> サンプルサイト : 登録結果<br>

alt 登録成功<br>
サンプルサイト -> ユーザー : 登録メッセージを表示<br>
else 登録失敗<br>
サンプルサイト -> ユーザー : 失敗メッセージを表示<br>

end<br>
end

ユーザー -> サンプルサイト : ログイン<br>
サンプルサイト -> DBサーバー : ログイン照会<br>
DBサーバー -> サンプルサイト : 認証結果<br>

activate ユーザー<br>
alt 認証成功<br>
サンプルサイト -> ユーザー : ユーザー名を表示<br>
else 認証失敗<br>
サンプルサイト -> ユーザー : 失敗メッセージを表示<br>
end<br>

opt ログイン中<br>


ユーザー -> サンプルサイト : 検索（商品名）<br>
サンプルサイト -> DBサーバー : 検索処理<br>
DBサーバー -> DBサーバー : 検索処理<br>
DBサーバー : サンプルサイト : 検索結果<br>
サンプルサイト -> ユーザー : 検索結果<br>

ユーザー -> サンプルサイト : 商品を購入<br>
サンプルサイト -> サンプルサイト : 合計の計算<br>
サンプルサイト -> ユーザー : 合計金額の表示<br>

ユーザー -> サンプルサイト : ログアウト<br>
サンプルサイト -> DBサーバー : ログアウト照会<br>
DBサーバー -> DBサーバー : ログアウト処理<br>
DBサーバー -> サンプルサイト : ログアウト結果<br>
サンプルサイト -> ユーザー : ログアウト結果<br>
end<br>

deactivate ユーザー

@enduml
